<div class="row">
	<div class="col-6">
		<pb-search-bar [store]="searchStore"/>
	</div>
</div>
<div class="row flex-fill pb h-min-0 mb-4">
	<div class="col-6 flex-fill pb h-min-0 h-100">
		<div class="card-std min-h-10rem my-2 h-100 position-relative">
			@if (isLoading()) {
				<div class="container position-absolute" style="left: calc(50% - 25px); top: 5rem;">
					<p-progress-spinner strokeWidth="6" fill="transparent" animationDuration=".5s" [style]="{ width: '50px', height: '50px' }" />
				</div>
			}
			@if (isQuerying()) {
				<p-table class="m-2 pb-3" [value]="[0,0,0,0,0,0,0,0,0,0,0,0]" [scrollable]="true" scrollHeight="flex">
					<ng-template #header>
						<tr>
							<th>
								Item Code
							</th>
							<th>
								Item Description
							</th>
							<th>
								Supplier Item Code
							</th>
						</tr>
					</ng-template>
					<ng-template #body>
						<tr>
							<td><p-skeleton width="10rem" class="mb-2"/></td>
							<td><p-skeleton width="10rem" class="mb-2"/></td>
							<td><p-skeleton width="10rem" class="mb-2"/></td>
						</tr>
					</ng-template>
				</p-table>
			} @else if (((lookupView$ | async) ?? []).length === 0) {
				<div class="container mt-5">
					<div class="row justify-content-center">
						<div class="col text-center">
							<h2>Nothing found for this criteria.</h2>
						</div>
					</div>
					<div class="row justify-content-center">
						<div class="col text-center">
							<img src="assets/svg/confused-smile.svg" alt="Confused Smile" width="200em"/>
						</div>
					</div>
				</div>
			} @else {
				<p-table class="m-2 pb-3 pb-table-std pb h-min-0" 
					[value]="(lookupView$ | async) ?? []" 
					[paginator]="true" 
					paginatorPosition="top" 
					[rowsPerPageOptions]="[25, 50, 75, 100]" 
					[rows]="25" 
					[metaKeySelection]="false"
					dataKey="id"
					selectionMode="single"
					[(selection)]="store().selected$"
					(selectionChange)="onSelectedChanged($event)"
					[scrollable]="true"
					scrollHeight="flex">
					<ng-template #header>
						<tr>
							<th>
								Item Code
							</th>
							<th>
								Item Description
							</th>
							<th>
								Supplier Item Code
							</th>
						</tr>
					</ng-template>
					<ng-template #body let-item>
						<tr [pSelectableRow]="item">
							<td>{{ item.itemCode }}</td>
							<td>{{ item.itemName }}</td>
							<td>{{ item.supplierItemCode ?? cEmptyValue }}</td>
						</tr>
					</ng-template>
				</p-table>
			}
		</div>
	</div>
	<div class="col-6">
		<div class="row">
			<div class="pb my-2 h-11rem">
				@if (selectedLookup() != null) {
					<p-card class="card-std h-100" [header]="selectedLookup()?.itemName">
						<p class="m-0 p-0"><span class="font-semibold">Item Code: </span>{{ selectedLookup()?.itemCode }}</p>
						<p class="m-0 mt-1 p-0"><span class="font-semibold">Supplier Code: </span>{{ selectedLookup()?.supplierItemCode ?? cEmptyValue }}</p>
						<p class="m-0 mt-1 p-0"><span class="font-semibold">Manufacturer: </span>{{ selectedLookup()?.manufacturerName ?? cEmptyValue }}</p>
						<p class="m-0 mt-1 p-0"><span class="font-semibold">Manufac. Desc: </span>{{ selectedLookup()?.manufacturerDescription ?? cEmptyValue }}</p>
						<p class="m-0 mt-1 p-0"><span class="font-semibold">List Name: </span>{{ selectedLookup()?.listName ?? cEmptyValue }}</p>
					</p-card>
				} @else {
					<p-card class="card-std h-100">
						<p>-No Selection-</p>
					</p-card>
				}
			</div>
		</div>
		<div class="row">
			<pb-iv-lookup-question-grid [lookupStore]="store()"/>
		</div>
	</div>
</div>