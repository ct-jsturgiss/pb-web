<div class="grid">
	<div class="col-6">
		<pb-search-bar [store]="searchStore"/>
	</div>
</div>
<div class="grid">
	<div class="xl:col-6 h-full">
		<div class="card-std min-h-10rem h-full">
			@if (isLoading()) {
				<div class="flex justify-center mt-40p">
					<p-progress-spinner strokeWidth="6" fill="transparent" animationDuration=".5s" [style]="{ width: '50px', height: '50px' }" />
				</div>
			}
			@if (isQuerying()) {
				<p-table class="m-2 pb-3" [value]="[0,0,0,0,0,0,0,0,0,0,0,0]" [scrollable]="true" scrollHeight="flex">
					<ng-template #header>
						<tr>
							<th>
								Item Code
							</th>
							<th>
								Item Description
							</th>
						</tr>
					</ng-template>
					<ng-template #body>
						<tr>
							<td><p-skeleton width="10rem" class="mb-2"/></td>
							<td><p-skeleton width="10rem" class="mb-2"/></td>
						</tr>
					</ng-template>
				</p-table>
			} @else if (((lookupView$ | async) ?? []).length === 0) {
				<div class="grid justify-content-center mt-8">
					<div class="col text-center">
						<h2>Nothing found for this criteria.</h2>
					</div>
				</div>
				<div class="grid justify-content-center">
					<div class="col text-center">
						<img src="assets/svg/confused-smile.svg" alt="Confused Smile" width="200em"/>
					</div>
				</div>
			} @else {
				<p-table class="m-2 pb-3 pb-table-std" 
					scrollHeight="flex" 
					[value]="(lookupView$ | async) ?? []" 
					[scrollable]="true" 
					[paginator]="true" 
					paginatorPosition="top" 
					[rowsPerPageOptions]="[25, 50, 75, 100]" 
					[rows]="25" 
					[metaKeySelection]="false"
					dataKey="id"
					selectionMode="single"
					[(selection)]="store().selected$"
					(selectionChange)="onSelectedChanged($event)">
					<ng-template #header>
						<tr>
							<th>
								Item Code
							</th>
							<th>
								Item Description
							</th>
						</tr>
					</ng-template>
					<ng-template #body let-item>
						<tr [pSelectableRow]="item">
							<td>{{ item.itemCode }}</td>
							<td>{{ item.itemName }}</td>
						</tr>
					</ng-template>
				</p-table>
			}
		</div>
	</div>
	<div class="xl:col-6">
		<div>
			@if (selectedLookup() != null) {
				<p-card class="card-std h-force-10rem" [header]="selectedLookup()?.itemName">
					<p class="m-0 p-0"><span class="font-semibold">Item Code: </span>{{ selectedLookup()?.itemCode }}</p>
					<p class="m-0 mt-1 p-0"><span class="font-semibold">Supplier Code: </span>{{ selectedLookup()?.supplierItemCode ?? "" }}</p>
					<p class="m-0 mt-1 p-0"><span class="font-semibold">Manufacturer: </span>{{ selectedLookup()?.manufacturerName ?? "" }}</p>
					<p class="m-0 mt-1 p-0"><span class="font-semibold">Manufac. Desc: </span>{{ selectedLookup()?.manufacturerDescription ?? "" }}</p>
					<p class="m-0 mt-1 p-0"><span class="font-semibold">List Name: </span>{{ selectedLookup()?.listName ?? "" }}</p>
				</p-card>
			} @else {
				<p-card class="card-std h-force-10rem">
					<p>-No Selection-</p>
				</p-card>
			}
		</div>
		<pb-iv-lookup-question-grid class="m-8 w-full" [lookupStore]="store()"/>
	</div>
</div>